# Render Deployment Guide for TIKR API

This guide explains how to deploy the TIKR API to Render without using cron jobs, which are not supported in Render's free tier.

## Why Render's Free Tier Can't Run Cron Jobs

Render's free tier has several limitations that make it unsuitable for running cron jobs:

1. **Spin Down After Inactivity**: Free tier services spin down after 15 minutes of inactivity, which means background processes like cron jobs won't run reliably.

2. **Ephemeral File System**: Any changes to the file system (like data generated by prediction models) are lost when the service restarts.

3. **Resource Constraints**: The free tier has CPU and memory limitations that might be insufficient for machine learning prediction pipelines.

4. **No Native Cron Support**: Unlike some PaaS providers, Render doesn't have native cron job support in its free tier.

## Deployment Steps

### 1. Prepare Your Files

Make sure you have the following files in your backend directory:

- `main.py` - The FastAPI application
- `requirements.txt` - Dependencies
- `render.yaml` - Render configuration
- `firebase-service-account.json` - Firebase credentials

### 2. Remove Any Cron Jobs

Ensure your `render.yaml` file only contains the web service configuration and no cron jobs:

```yaml
services:
  # API service
  - type: web
    name: tikr-api
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: uvicorn main:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: PYTHON_VERSION
        value: 3.9.0
    healthCheckPath: /
    autoDeploy: true
```

### 3. Deploy to Render

1. Push your code to GitHub
2. Go to your Render dashboard: https://dashboard.render.com/
3. Create a new Web Service and connect to your GitHub repository
4. Select the `my-react-app/backend` directory as the root directory
5. Render will automatically detect the render.yaml file and configure the service
6. Make sure to set up the following environment variables in Render:
   - PORT: 8000 (or any port you prefer)
7. Click 'Create Web Service'

### 4. Alternative Solutions for Scheduled Tasks

Since Render's free tier doesn't support cron jobs, consider these alternatives:

#### Option 1: Manual Updates

Run the update script manually whenever you need to update predictions:

```bash
python update_predictions.py
```

#### Option 2: GitHub Actions

Set up a GitHub Action to run the update script on a schedule (see the `.github/workflows/update-predictions.yml` file in your repository).

#### Option 3: AWS Lambda or Google Cloud Functions

Set up a serverless function to run the update script on a schedule:

1. Create a Lambda function with your update script
2. Set up a CloudWatch Event Rule to trigger the function on a schedule
3. Configure the function with the necessary environment variables and permissions

## Troubleshooting

If your Render deployment is not working:

1. Check the Render logs for any errors
2. Verify that your Firebase service account file is correctly set up
3. Make sure all required dependencies are in your requirements.txt file
4. Test your API locally before deploying
5. Ensure your render.yaml file is correctly configured

## Need Help?

If you're still having issues with your Render deployment, contact Render support or check their documentation at https://render.com/docs
